<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foro ZONEPVP | Comunidad Premium</title>
    <style>
        :root {
            --mc-orange: #FFAA00;
            --mc-dark-orange: #8B5A00;
            --mc-green: #55FF55;
            --mc-red: #FF5555;
            --mc-dark: #0C0C0C;
            --mc-gray: #555555;
            --discord-blurple: #5865F2;
            --text-glow: 0 0 10px currentColor;
            --box-glow: 0 0 15px rgba(255, 170, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Minecraft', sans-serif;
        }

        body {
            background-color: var(--mc-dark);
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255, 170, 0, 0.1) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(85, 255, 85, 0.1) 0%, transparent 25%),
                url('https://www.minecraft.net/content/dam/minecraft/touchup-2020/minecraft-background-logged-in.jpg');
            background-size: cover;
            background-attachment: fixed;
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            text-align: center;
            padding: 30px 0;
            position: relative;
        }

        .logo {
            font-size: 4rem;
            color: var(--mc-orange);
            text-shadow: 4px 4px 0 var(--mc-dark-orange), var(--text-glow);
            letter-spacing: 3px;
            margin-bottom: 10px;
            animation: pulse 2s infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }

        /* User Auth */
        .user-auth {
            position: absolute;
            top: 30px;
            left: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--mc-orange);
            cursor: pointer;
            transition: all 0.3s;
        }

        .user-avatar:hover {
            transform: scale(1.1);
        }

        .auth-btn {
            padding: 12px 25px;
            background: var(--mc-orange);
            color: black;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .auth-btn:hover {
            background: white;
        }

        /* Navigation */
        .nav-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--mc-orange);
        }

        .nav-btn {
            padding: 12px 25px;
            background: rgba(85, 85, 85, 0.7);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .nav-btn.active {
            background: var(--mc-orange);
            color: black;
            font-weight: bold;
        }

        /* Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Threads */
        .threads-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .thread {
            background: rgba(20, 20, 20, 0.8);
            border: 2px solid var(--mc-gray);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            transition: all 0.3s;
        }

        .thread:hover {
            border-color: var(--mc-orange);
            transform: translateY(-3px);
        }

        .thread-title {
            color: var(--mc-orange);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .thread-meta {
            color: var(--mc-light);
            font-size: 0.9rem;
            margin-top: 15px;
        }

        .no-threads {
            text-align: center;
            color: var(--mc-light);
            font-size: 1.2rem;
            margin-top: 50px;
        }

        /* Profile */
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(20, 20, 20, 0.9);
            padding: 40px;
            border-radius: 15px;
            border: 3px solid var(--mc-orange);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--mc-orange);
        }

        .profile-info h2 {
            color: var(--mc-orange);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .profile-rank {
            display: inline-block;
            padding: 5px 15px;
            background: var(--mc-dark-orange);
            border-radius: 20px;
            font-size: 1.1rem;
        }

        .profile-stats {
            display: flex;
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            min-width: 100px;
        }

        .stat-value {
            font-size: 1.8rem;
            color: var(--mc-orange);
            font-weight: bold;
        }

        .profile-bio {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            line-height: 1.7;
        }

        /* Thread Form */
        .thread-form {
            background: rgba(20, 20, 20, 0.9);
            padding: 40px;
            border-radius: 15px;
            border: 3px solid var(--mc-orange);
            margin: 30px auto;
            max-width: 800px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: var(--mc-orange);
            margin-bottom: 10px;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--mc-gray);
            color: white;
            border-radius: 5px;
        }

        .form-group textarea {
            min-height: 200px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--mc-dark);
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            border: 3px solid var(--mc-orange);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo {
                font-size: 2.5rem;
            }
            
            .user-auth {
                position: static;
                justify-content: center;
                margin-top: 20px;
            }
            
            .nav-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .nav-btn, .auth-btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
    <link href="https://fonts.cdnfonts.com/css/minecraft-4" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1 class="logo">FORO ZONEPVP</h1>
            <div class="user-auth">
                <img id="user-avatar" class="user-avatar" src="https://i.imgur.com/JYQ3X3E.png" onclick="showProfile()" style="display: none;">
                <button id="auth-btn" class="auth-btn" onclick="toggleAuthModal()">INICIAR SESIÓN</button>
            </div>
        </header>

        <!-- Navigation -->
        <div class="nav-container">
            <button class="nav-btn active" onclick="showSection('threads')">INICIO</button>
            <button class="nav-btn" onclick="showSection('rules')">NORMAS</button>
            <button class="nav-btn" onclick="showSection('users')">USUARIOS</button>
        </div>

        <!-- Threads Section -->
        <section id="threads-section" class="content-section active">
            <div class="threads-container">
                <div id="threads-list">
                    <p class="no-threads">No hay hilos disponibles. ¡Sé el primero en publicar!</p>
                </div>
                <button id="new-thread-btn" class="auth-btn" style="display: none; margin: 30px auto;" onclick="showThreadForm()">
                    CREAR NUEVO HILO
                </button>
            </div>
        </section>

        <!-- Rules Section -->
        <section id="rules-section" class="content-section">
            <div class="threads-container">
                <h2 style="color: var(--mc-orange); margin-bottom: 20px;">NORMAS DEL SERVIDOR</h2>
                <ol style="margin-left: 20px; line-height: 1.6;">
                    <li>No usar hacks o clientes modificados</li>
                    <li>Respetar a todos los jugadores</li>
                    <li>No hacer spam en el chat</li>
                    <li>Reportar bugs encontrados</li>
                    <li>Seguir las indicaciones del staff</li>
                </ol>
            </div>
        </section>

        <!-- Users Section -->
        <section id="users-section" class="content-section">
            <div class="threads-container">
                <h2 style="color: var(--mc-orange); margin-bottom: 20px;">USUARIOS REGISTRADOS</h2>
                <div id="users-list">
                    <p class="no-threads">No hay usuarios registrados</p>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile-section" class="content-section">
            <div class="profile-container">
                <div class="profile-header">
                    <img id="profile-avatar" class="profile-avatar" src="https://i.imgur.com/JYQ3X3E.png">
                    <div class="profile-info">
                        <h2 id="profile-username">Usuario</h2>
                        <span class="profile-rank" id="profile-rank">Miembro</span>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="threads-count">0</div>
                        <div class="stat-label">Hilos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="comments-count">0</div>
                        <div class="stat-label">Comentarios</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="join-date">-</div>
                        <div class="stat-label">Miembro desde</div>
                    </div>
                </div>
                
                <div class="profile-bio">
                    <h3 style="color: var(--mc-orange); margin-bottom: 10px;">BIOGRAFÍA</h3>
                    <p id="profile-bio-text">Este usuario no ha agregado una biografía.</p>
                </div>
                
                <div style="text-align: center; margin-top: 40px;">
                    <button class="auth-btn" onclick="showEditProfile()">EDITAR PERFIL</button>
                    <button class="auth-btn" style="background: var(--mc-gray); margin-left: 15px;" onclick="showSection('threads')">VOLVER</button>
                </div>
            </div>
        </section>

        <!-- Thread Form -->
        <section id="thread-form-section" class="content-section">
            <div class="thread-form">
                <h2 style="color: var(--mc-orange); margin-bottom: 20px;">NUEVO HILO</h2>
                <div class="form-group">
                    <label for="thread-title">Título</label>
                    <input type="text" id="thread-title" placeholder="Título del hilo">
                </div>
                <div class="form-group">
                    <label for="thread-content">Contenido</label>
                    <textarea id="thread-content" placeholder="Escribe aquí tu mensaje"></textarea>
                </div>
                <div class="form-actions">
                    <button class="auth-btn" onclick="createThread()">PUBLICAR</button>
                    <button class="auth-btn" style="background: var(--mc-gray);" onclick="showSection('threads')">CANCELAR</button>
                </div>
            </div>
        </section>

        <!-- Auth Modal -->
        <div id="auth-modal" class="modal">
            <div class="modal-content">
                <h2 id="auth-modal-title" style="color: var(--mc-orange); margin-bottom: 20px;">INICIAR SESIÓN</h2>
                <div style="margin-bottom: 20px;">
                    <input type="text" id="auth-username" placeholder="Nombre de usuario" style="width: 100%; padding: 12px; margin-bottom: 15px;">
                    <input type="password" id="auth-password" placeholder="Contraseña" style="width: 100%; padding: 12px;">
                </div>
                <div id="auth-error" style="color: var(--mc-red); text-align: center; margin-bottom: 15px;"></div>
                <div style="display: flex; gap: 10px;">
                    <button class="auth-btn" style="flex: 1;" onclick="handleAuth()">ENTRAR</button>
                    <button class="auth-btn" style="flex: 1; background: var(--mc-gray);" onclick="switchAuthMode()">REGISTRARSE</button>
                </div>
                <button class="auth-btn" style="width: 100%; margin-top: 10px; background: var(--mc-red);" onclick="toggleAuthModal()">CANCELAR</button>
            </div>
        </div>
    </div>

    <script>
        // Database
        let users = JSON.parse(localStorage.getItem('forumUsers')) || [];
        let threads = JSON.parse(localStorage.getItem('forumThreads')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentForumUser')) || null;
        let isLoginMode = true;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateUI();
            loadThreads();
            loadUsers();
            
            if (currentUser) {
                loadProfile();
            }
        });

        // Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Deactivate all buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(`${sectionId}-section`).classList.add('active');
            
            // Activate clicked button
            const activeBtn = document.querySelector(`.nav-btn[data-section="${sectionId}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
        }

        // Update UI based on auth state
        function updateUI() {
            const authBtn = document.getElementById('auth-btn');
            const userAvatar = document.getElementById('user-avatar');
            const newThreadBtn = document.getElementById('new-thread-btn');
            
            if (currentUser) {
                authBtn.textContent = 'CERRAR SESIÓN';
                userAvatar.style.display = 'block';
                userAvatar.src = currentUser.avatar || 'https://i.imgur.com/JYQ3X3E.png';
                newThreadBtn.style.display = 'block';
            } else {
                authBtn.textContent = 'INICIAR SESIÓN';
                userAvatar.style.display = 'none';
                newThreadBtn.style.display = 'none';
            }
        }

        // Auth Modal
        function toggleAuthModal() {
            const authModal = document.getElementById('auth-modal');
            
            if
